<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Open Graph -->
  <meta property="og:title" content="14~23년생 키즈모델 모집">
  <meta property="og:description" content="아이의 인생사진을 남겨 드립니다!">
  <meta property="og:image" content="https://minkn96.github.io/site/kids_gift_s.png">
  <meta property="og:url" content="https://minkn96.github.io/site/kids_giftm.html">
  <meta property="og:type" content="website">
  <meta property="og:image:width" content="1080">
  <meta property="og:image:height" content="1080">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KN95GTT2');</script>
  <!-- End Google Tag Manager -->

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-P7B92596QT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-P7B92596QT');
  </script>

  <!-- MS Clarity -->
  <script>
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "st7wj6aj7b");
  </script>

  <!-- 라이트 모드 강제 -->
  <meta name="color-scheme" content="light">
  <meta name="supported-color-schemes" content="light">

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>키즈 모델 모집</title>

  <style>
    :root { --cta-height: 64px; --brand-blue: #2463eb; --brand-yellow: #ffd93b; --safe-bottom: env(safe-area-inset-bottom, 0px); }
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0; font-family: 'Noto Sans KR', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: #fff; color: #111; padding-bottom: calc(var(--cta-height) + var(--safe-bottom));
    }

    .mobile-container {
      max-width: 430px; margin: 0 auto; position: relative;
      min-height: 100vh; background: #fff;
    }
    @media (min-width: 431px) {
      body { background: #f5f5f5; }
      .mobile-container {
        box-shadow: 0 0 20px rgba(0,0,0,.1);
        border-left: 1px solid #eaeaea;
        border-right: 1px solid #eaeaea;
      }
    }
    .landing-image { width: 100%; display: block; margin: 0 auto; height: auto; }

    /* ▼▼ 배경 위 슬라이더 ▼▼ */
    .hero-wrap {
      position: relative;
      width: 100%;
    }
    .hero-slider {
      position: absolute;
      top: 32%;       /* 배경 이미지에서 빈 공간이 시작되는 위치 — 필요시 조정 */
      left: 17%;      /* (100% - 66%) / 2 = 가운데 정렬 */
      width: 66%;     /* 전체의 2/3 크기 */
      height: 68%;    /* top + height = 100% 맞추면 딱 맞음 */
      overflow: hidden;
      border-radius: 8px; /* 살짝 둥글게 */
    }
    .hero-track {
      display: flex;
      height: 100%;
      transition: transform 0.5s ease;
      will-change: transform;
    }
    .hero-slide {
      width: 100%;
      height: 100%;
      flex: 0 0 100%;
      object-fit: cover;
      display: block;
    }
    .hero-dots {
      position: absolute;
      bottom: 10px;
      left: 0; right: 0;
      display: flex;
      justify-content: center;
      gap: 6px;
      z-index: 10;
    }
    .hero-dot {
      width: 7px; height: 7px;
      border-radius: 50%;
      background: rgba(255,255,255,0.6);
      border: none; padding: 0; cursor: pointer;
      transition: background .3s, transform .3s;
    }
    .hero-dot.active {
      background: #fff;
      transform: scale(1.4);
    }
    /* ▲▲ 배경 위 슬라이더 ▲▲ */

    .floating-cta {
      position: fixed; left: 50%; right: auto; bottom: 0; z-index: 9999;
      transform: translateX(-50%);
      max-width: 430px; width: 100%;
      display: flex; gap: 8px; align-items: center; justify-content: center;
      padding: 10px 14px calc(10px + var(--safe-bottom));
      background: rgba(255,255,255,0.96); border-top: 1px solid #eaeaea;
      backdrop-filter: saturate(180%) blur(8px); -webkit-backdrop-filter: saturate(180%) blur(8px);
      transition: transform .25s ease;
    }
    .floating-cta.hidden { transform: translateX(-50%) translateY(110%); }
    .floating-cta__title { font-weight: 700; font-size: 15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 52%; }
    .floating-cta__btn {
      appearance: none; border: 0; cursor: pointer; border-radius: 9999px;
      padding: 14px 20px; font-weight: 800; font-size: 16px; color: #0b1a3a;
      background: linear-gradient(0deg, var(--brand-yellow), #ffe47a);
      box-shadow: 0 6px 16px rgba(0,0,0,.12);
    }
    .floating-cta__btn:active { transform: translateY(1px); }
    @media (min-width: 768px) {
      :root { --cta-height: 72px; }
      .floating-cta__title { font-size: 16px; max-width: none; }
      .floating-cta__btn { font-size: 17px; padding: 16px 28px; }
    }
    @media (prefers-reduced-motion: reduce) { html { scroll-behavior: auto; } }
    #apply-anchor { position: relative; top: -12px; height: 1px; width: 100%; display: block; }

    /* ▼▼ 실시간 신청 토스트 스타일 ▼▼ */
    .live-signup {
      position: fixed;
      right: calc(50% - 215px + 12px);
      top: 12px;
      z-index: 9999; display: flex; flex-direction: column; gap: 8px;
      pointer-events: none;
    }
    @media (max-width: 430px) {
      .live-signup { right: 12px; }
    }
    .live-toast {
      display: flex; align-items: center; gap: 10px; padding: 10px 12px;
      background: rgba(255,255,255,0.96); border: 1px solid #eaeaea;
      border-radius: 14px; box-shadow: 0 8px 20px rgba(0,0,0,.12);
      transform: translateY(-8px); opacity: 0; will-change: transform, opacity;
      animation: toast-in .36s ease forwards, toast-out .36s ease forwards 5.5s;
    }
    .live-avatar { width: 28px; height: 28px; border-radius: 50%; overflow: hidden; flex: 0 0 28px; background: #eee; }
    .live-badge { display:flex; align-items:center; gap:6px; font-size: 12px; color: #0b1a3a; }
    .live-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--brand-blue); box-shadow: 0 0 0 0 rgba(36,99,235,.5); animation: pulse 2s infinite; }
    .live-meta { font-size: 12px; opacity: .58; margin-top: 2px; }
    @keyframes toast-in { to { transform: translateY(0); opacity: 1; } }
    @keyframes toast-out { to { transform: translateY(-8px); opacity: 0; } }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(36,99,235,.5); }
      70% { box-shadow: 0 0 0 12px rgba(36,99,235,0); }
      100% { box-shadow: 0 0 0 0 rgba(36,99,235,0); }
    }
    @media (prefers-reduced-motion: reduce) {
      .live-toast { animation: none; opacity: 1; }
      .live-dot { animation: none; }
    }
    /* ▲▲ 실시간 신청 토스트 스타일 ▲▲ */

    /* ▼▼ 친구 공유 버튼 스타일 ▼▼ */
    .share-button {
      position: fixed;
      left: calc(50% - 215px + 12px);
      bottom: calc(var(--cta-height) + var(--safe-bottom) + 12px);
      z-index: 9999;
      appearance: none; border: 0; cursor: pointer; border-radius: 20px;
      padding: 12px 16px; font-weight: 600; font-size: 13px; color: #0b1a3a;
      background: linear-gradient(0deg, var(--brand-yellow), #ffe47a);
      border: 1px solid rgba(0,0,0,0.08);
      box-shadow: 0 4px 12px rgba(0,0,0,.12);
      display: flex; align-items: center; gap: 6px;
      transition: all .2s ease;
    }
    @media (max-width: 430px) {
      .share-button { left: 12px; }
    }
    .share-button:hover {
      background: linear-gradient(0deg, #ffcc00, var(--brand-yellow));
      box-shadow: 0 6px 16px rgba(0,0,0,.16);
      transform: translateY(-1px);
    }
    .share-button:active { transform: translateY(0); }
    .share-icon { width: 16px; height: 16px; flex: 0 0 16px; }
    .copy-toast {
      position: fixed; left: 50%; top: 50%; transform: translate(-50%, -50%);
      z-index: 10000; max-width: 280px; width: 90%;
      padding: 16px 20px; text-align: center;
      background: rgba(11,26,58,0.95); color: #fff; border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,.2);
      backdrop-filter: saturate(180%) blur(8px); -webkit-backdrop-filter: saturate(180%) blur(8px);
      opacity: 0; transform: translate(-50%, -50%) scale(0.9);
      transition: all .3s ease;
      pointer-events: none;
    }
    .copy-toast.show {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }
    .copy-toast-title { font-weight: 600; font-size: 14px; margin-bottom: 4px; }
    .copy-toast-subtitle { font-size: 12px; opacity: 0.8; line-height: 1.4; }
    @media (min-width: 768px) {
      .share-button { font-size: 14px; padding: 14px 18px; }
      .copy-toast-title { font-size: 15px; }
      .copy-toast-subtitle { font-size: 13px; }
    }
    /* ▲▲ 친구 공유 버튼 스타일 ▲▲ */

    /* ▼▼ 마감 임박 바 & 등록 테이블 ▼▼ */
    .urgency-bar { position: sticky; top: 0; z-index: 999; padding: 10px 14px; background: #0b1a3a; color:#fff; border-bottom: 1px solid rgba(255,255,255,.12); }
    .urgency-text { font-weight: 800; font-size: 14px; letter-spacing: .2px; }
    .urgency-text strong { color: var(--brand-yellow); }
    .urgency-progress { height: 6px; background: rgba(255,255,255,.25); border-radius: 999px; overflow: hidden; margin-top: 8px; }
    .urgency-progress span { display:block; height:100%; width: 60%; background: var(--brand-yellow); box-shadow: inset 0 0 0 1px rgba(0,0,0,.05); transition: width .6s ease; }
    .recent-signups { padding: 18px 14px 6px; }
    .recent-signups h2 { margin: 8px 0 10px; font-size: 16px; }
    .table-wrap { border: 1px solid #eaeaea; border-radius: 12px; overflow: hidden; }
    .signup-table { width:100%; border-collapse: collapse; font-size: 14px; }
    .signup-table thead th { background:#f8fafc; text-align:left; padding:10px; border-bottom: 1px solid #eaeaea; }
    .signup-table tbody td { padding:10px; border-bottom: 1px solid #f1f5f9; }
    .signup-table tbody tr:last-child td { border-bottom: 0; }
    .signup-table tbody tr.highlight { animation: rowflash 2s ease; }
    @keyframes rowflash { 0% { background:#fff9db; } 100% { background: transparent; } }
    /* ▲▲ 마감 임박 바 & 등록 테이블 ▲▲ */

    /* ▼▼ 푸터 스타일 ▼▼ */
    .footer {
      margin-top: 40px; padding: 24px 14px 32px;
      background: #f8fafc; border-top: 1px solid #eaeaea; text-align: center;
    }
    .footer-content { max-width: 400px; margin: 0 auto; color: #666; font-size: 13px; line-height: 1.5; }
    .footer-content .company-name { font-weight: 600; color: #333; margin-bottom: 4px; }
    .footer-content .business-number { opacity: 0.8; }
    @media (min-width: 768px) {
      .footer { padding: 32px 20px 40px; }
      .footer-content { font-size: 14px; }
    }
    /* ▲▲ 푸터 스타일 ▲▲ */
  </style>

  <!-- 텐핑 제출완료 콜백 -->
  <script>
    function conversionCallback() {
      if (typeof fbq === 'function') {
        fbq('track', 'Lead', {
          content_category: 'kidsmodel',
          content_name: 'kids_gift',
          source: 'tenping_form',
          page: 'landing',
          event_time: Date.now()
        });
        fbq('trackCustom','kids_cta',{
          content_category: 'kidsmodel',
          content_name: 'kids_gift',
          source: 'tenping_form',
          page: 'landing',
        });
      }
      if (typeof window.karrotPixel !== 'undefined') {
        window.karrotPixel.track("Lead");
      }
    }
  </script>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KN95GTT2"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <div class="mobile-container">

    <!-- 마감 임박 바 -->
    <div class="urgency-bar" role="status" aria-live="polite">
      <div class="urgency-text">오늘 마감까지 <span id="countdown">00:00:00</span> · 예상 잔여 <strong><span id="seats-left">12</span>명</strong></div>
      <div class="urgency-progress" aria-hidden="true"><span id="urgency-fill" style="width:70%"></span></div>
    </div>

    <!-- ▼▼ 배경 이미지 + 슬라이더 오버레이 ▼▼ -->
    <div class="hero-wrap">
      <!-- 배경 이미지 -->
      <img src="kids_giftm1.png" alt="키즈모델 협찬 배경" class="landing-image" />

      <!-- 배경 위에 올라가는 슬라이더 -->
      <div class="hero-slider">
        <div class="hero-track" id="heroTrack">
          <img src="kids_giftm1_1.png" alt="협찬 사진 1" class="hero-slide" />
          <img src="kids_giftm1_2.png" alt="협찬 사진 2" class="hero-slide" />
          <img src="kids_giftm1_3.png" alt="협찬 사진 3" class="hero-slide" />
          <img src="kids_giftm1_4.png" alt="협찬 사진 4" class="hero-slide" />
          <img src="kids_giftm1_5.png" alt="협찬 사진 5" class="hero-slide" />
          <img src="kids_giftm1_6.png" alt="협찬 사진 6" class="hero-slide" />
          <img src="kids_giftm1_7.png" alt="협찬 사진 7" class="hero-slide" />
          <img src="kids_giftm1_8.png" alt="협찬 사진 8" class="hero-slide" />
        </div>
        <!-- 인디케이터 점 -->
        <div class="hero-dots" id="heroDots"></div>
      </div>
    </div>
    <!-- ▲▲ 배경 이미지 + 슬라이더 오버레이 ▲▲ -->

    <!-- 두 번째 랜딩 이미지 -->
    <img src="kids_giftm.png" alt="키즈모델_협찬 랜딩페이지" class="landing-image" />

    <!-- 신청폼 앵커 -->
    <span id="apply-anchor"></span>

    <!-- Tenping 폼 -->
    <tenping class="adsbytenping" style="width:100%; margin:0 auto; display:block;"
      tenping-ad-type="CInmlFSNPJoo9rBMK%2brlTg%3d%3d"
      tenping-ad-client="bMCak6oFZXAMeS0Ed1JBbmPYyFKadysuzNA%2fwwgyA50OoxZL1SUZ3jqIb0PvbgZs"
      tenping-ad-campaign="2025082211040001"
      tenping-ad-distributionAddID="2026021622380001"
      tenping-ad-contain_image="false"
      tenping-ad-contain_logo="false"
      tenping-ad-contain_Plugin="false"
      tenping-ad-contain_TpCall="false"
      tenping-ad-theme="white">
    </tenping>
    <script async src="//ads.tenping.kr/scripts/adsbytenping.min.js"></script>

    <!-- 최근 등록 현황 테이블 -->
    <section class="recent-signups" id="recent-signups" aria-label="최근 등록 현황">
      <h2>최근 등록 현황</h2>
      <div class="table-wrap">
        <table class="signup-table" aria-live="polite">
          <thead>
            <tr><th scope="col">이름</th><th scope="col">나이</th><th scope="col">등록 시각</th></tr>
          </thead>
          <tbody id="signup-tbody"></tbody>
        </table>
      </div>
    </section>

    <!-- 푸터 -->
    <footer class="footer">
      <div class="footer-content">
        <div class="company-name">광고대행사 : (주)편리한세상</div>
        <div class="business-number">사업자번호 : 722-26-01851</div>
      </div>
    </footer>
  </div>

  <!-- 하단 플로팅바 -->
  <div class="floating-cta" role="region" aria-label="빠른 신청 호출영역">
    <div class="floating-cta__title">유아용품 협찬모델</div>
    <button id="go-apply" class="floating-cta__btn" aria-label="신청 폼으로 이동">신청하기</button>
  </div>

  <!-- 실시간 신청 토스트 컨테이너 -->
  <div class="live-signup" aria-live="polite" aria-atomic="false"></div>

  <!-- 친구에게 알리기 버튼 -->
  <button class="share-button" id="share-btn" aria-label="주변에도 알려주기">
    <svg class="share-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="18" cy="5" r="3"></circle>
      <circle cx="6" cy="12" r="3"></circle>
      <circle cx="18" cy="19" r="3"></circle>
      <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
      <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
    </svg>
    지인에게 알려주기
  </button>

  <!-- 링크 복사 토스트 -->
  <div class="copy-toast" id="copy-toast">
    <div class="copy-toast-title">링크가 복사되었습니다</div>
    <div class="copy-toast-subtitle">카톡이나 DM으로 공유해주세요</div>
  </div>

  <!-- 플로팅 CTA 스크립트 -->
  <script>
    (function () {
      const btn = document.getElementById('go-apply');
      const anchor = document.getElementById('apply-anchor');
      const bar = document.querySelector('.floating-cta');
      const form = document.querySelector('.adsbytenping');

      btn.addEventListener('click', function (e) {
        e.preventDefault();
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (anchor && anchor.scrollIntoView) {
          anchor.scrollIntoView({ behavior: prefersReduced ? 'auto' : 'smooth', block: 'start' });
        } else {
          window.location.hash = '#apply-anchor';
        }
      });

      if ('IntersectionObserver' in window && form) {
        const io = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) bar.classList.add('hidden');
            else bar.classList.remove('hidden');
          });
        }, { threshold: 0.15 });
        io.observe(form);
      }
    })();
  </script>

  <!-- ▼▼ 배경 위 슬라이더 스크립트 ▼▼ -->
  <script>
  (function () {
    const TOTAL = 8;
    const INTERVAL = 1500; // 1.5초마다 자동 전환
    const track = document.getElementById('heroTrack');
    const dotsWrap = document.getElementById('heroDots');
    const sliderEl = document.querySelector('.hero-slider'); // ← 버그 수정: track 대신 슬라이더 전체를 감시
    if (!track || !dotsWrap) return;

    let current = 0;
    let timer = null;
    let touchStartX = 0;
    let touchDeltaX = 0;

    // 인디케이터 점 생성
    const dots = Array.from({ length: TOTAL }, (_, i) => {
      const btn = document.createElement('button');
      btn.className = 'hero-dot' + (i === 0 ? ' active' : '');
      btn.setAttribute('aria-label', `${i + 1}번 사진`);
      btn.addEventListener('click', () => goTo(i));
      dotsWrap.appendChild(btn);
      return btn;
    });

    function goTo(idx) {
      current = (idx + TOTAL) % TOTAL;
      track.style.transform = `translateX(-${current * 100}%)`;
      dots.forEach((d, i) => d.classList.toggle('active', i === current));
    }

    function startTimer() {
      stopTimer();
      timer = setInterval(() => goTo(current + 1), INTERVAL);
    }
    function stopTimer() {
      clearInterval(timer);
    }

    // 터치 스와이프 지원
    track.addEventListener('touchstart', e => {
      touchStartX = e.touches[0].clientX;
      touchDeltaX = 0;
      stopTimer();
    }, { passive: true });

    track.addEventListener('touchmove', e => {
      touchDeltaX = e.touches[0].clientX - touchStartX;
      const offset = -(current * 100) + (touchDeltaX / track.offsetWidth * 100);
      track.style.transition = 'none';
      track.style.transform = `translateX(${offset}%)`;
    }, { passive: true });

    track.addEventListener('touchend', () => {
      track.style.transition = 'transform 0.5s ease';
      if (touchDeltaX < -50) goTo(current + 1);
      else if (touchDeltaX > 50) goTo(current - 1);
      else goTo(current);
      startTimer();
    });

    // ← 버그 수정: track이 아닌 sliderEl을 감시해야 이동 시 오작동 없음
    if ('IntersectionObserver' in window && sliderEl) {
      new IntersectionObserver(entries => {
        entries[0].isIntersecting ? startTimer() : stopTimer();
      }, { threshold: 0.2 }).observe(sliderEl);
    } else {
      startTimer();
    }
  })();
  </script>
  <!-- ▲▲ 배경 위 슬라이더 스크립트 ▲▲ -->

  <!-- ▼▼ 실시간 신청 애니메이션 스크립트 ▼▼ -->
  <script>
    (function(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const container = document.querySelector('.live-signup');
      const seatsEl = document.getElementById('seats-left');
      const fillEl = document.getElementById('urgency-fill');
      const countdownEl = document.getElementById('countdown');
      const tbody = document.getElementById('signup-tbody');
      if (!container) return;

      // 공유 버튼
      const shareBtn = document.getElementById('share-btn');
      const copyToast = document.getElementById('copy-toast');
      if (shareBtn) {
        shareBtn.addEventListener('click', function() {
      // 모바일/태블릿 감지 (UA + 터치 지원 둘 다 체크)
          const isTouchDevice = navigator.share && (
            /Android|iPhone|iPad|iPod|Mobile|Tablet/i.test(navigator.userAgent) ||
            (navigator.maxTouchPoints && navigator.maxTouchPoints > 1)
          );

          if (isTouchDevice) {
            // 모바일/태블릿: 네이티브 공유 (카톡, DM 등 바로 선택 가능)
            navigator.share({
              title: '14~23년생 키즈모델 모집',
              text: '유아용품 협찬받아 보세요!',
              url: 'https://m.site.naver.com/1ZrvR'
            }).catch(err => console.log('공유 취소:', err));
          } else {
            // PC: 링크 복사
            navigator.clipboard.writeText('https://m.site.naver.com/215cA').then(() => {
              if (copyToast) {
                copyToast.classList.add('show');
                setTimeout(() => copyToast.classList.remove('show'), 3000);
              }
            }).catch(() => {
              const textArea = document.createElement('textarea');
              textArea.value = 'https://m.site.naver.com/215cA';
              document.body.appendChild(textArea);
              textArea.select();
              document.execCommand('copy');
              document.body.removeChild(textArea);
              if (copyToast) {
                copyToast.classList.add('show');
                setTimeout(() => copyToast.classList.remove('show'), 3000);
              }
            });
          }
        });
      }

      // 더미 데이터
      const lastNames = ['김','이','박','최','정','윤','장','임','한','오','서','신','조'];
      const firstNames = ['서준','하준','도윤','시후','지호','현우','하율','서연','지우','서윤','하윤','지민','소율','민준','연우','예준','지훈','윤서','수아','은우','가은','민서','시현','나윤','유진','채원'];
      const ages = ['4세','5세','6세','7세','8세','9세','10세','11세','12세','13세'];

      function rand(min, max){ return Math.floor(Math.random() * (max - min + 1)) + min; }
      function maskedName(){
        const ln = lastNames[rand(0, lastNames.length-1)];
        const fn = firstNames[rand(0, firstNames.length-1)];
        return ln + fn.slice(0,1) + '○';
      }
      function avatarDataURI(initial){
        const palette = ['#E0F2FE','#FEE2E2','#F3E8FF','#FEF3C7','#E2FBE8'];
        const bg = palette[rand(0, palette.length-1)];
        const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='56' height='56'>
          <rect width='56' height='56' rx='28' fill='${bg}'/>
          <text x='50%' y='56%' text-anchor='middle' font-family='Noto Sans KR, sans-serif' font-size='28' fill='#0b1a3a'>${initial}</text>
        </svg>`;
        return 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
      }

      function nowKST(){ return new Date(new Date().toLocaleString('en-US', { timeZone: 'Asia/Seoul' })); }
      function midnightNextKST(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()+1, 0, 0, 0); }
      function formatRel(dt){
        const n = nowKST(); const diff = n - dt; const mins = Math.floor(diff/60000);
        if (mins < 1) return '방금';
        if (mins < 60) return mins + '분 전';
        const hrs = Math.floor(mins/60);
        if (hrs < 24) return hrs + '시간 전';
        return dt.toLocaleDateString('ko-KR', { month:'numeric', day:'numeric', timeZone:'Asia/Seoul' });
      }
      function formatTime(dt){ return dt.toLocaleTimeString('ko-KR', { hour:'2-digit', minute:'2-digit', hour12:false, timeZone:'Asia/Seoul' }); }

      const dailyQuota = 40;
      let seatsRemaining = Math.max(3, Math.floor(20 + Math.random()*8));
      function updateSeatsUI(){
        if (seatsEl) seatsEl.textContent = String(seatsRemaining);
        if (fillEl) fillEl.style.width = Math.max(0, Math.min(100, ((dailyQuota - seatsRemaining)/dailyQuota)*100)) + '%';
      }
      updateSeatsUI();

      function updateCountdown(){
        const n = nowKST(); const m = midnightNextKST(n);
        const total = (m - n) / 1000; if (total < 0) return;
        const h = Math.floor(total/3600);
        const mm = Math.floor((total%3600)/60);
        const s = Math.floor(total%60);
        if (countdownEl) countdownEl.textContent = `${String(h).padStart(2,'0')}:${String(mm).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
      }
      updateCountdown(); setInterval(updateCountdown, 1000);

      function addRow(name, age, dateObj, highlight){
        if (!tbody) return;
        const tr = document.createElement('tr');
        if (highlight && !prefersReduced) tr.classList.add('highlight');
        tr.innerHTML = `<td>${name}</td><td>${age}</td><td title="${formatTime(dateObj)}">${formatRel(dateObj)}</td>`;
        tbody.insertBefore(tr, tbody.firstChild);
        while (tbody.children.length > 20) tbody.removeChild(tbody.lastElementChild);
      }

      const preCount = Math.floor(6 + Math.random()*6);
      for (let i = preCount; i >= 1; i--) {
        const when = new Date(nowKST().getTime() - rand(5,60)*60000);
        addRow(maskedName(), ages[rand(0, ages.length-1)], when, false);
      }

      function createToast(){
        const name = maskedName();
        const age = ages[rand(0, ages.length-1)];
        const toast = document.createElement('div');
        toast.className = 'live-toast';
        toast.setAttribute('role','status');
        toast.innerHTML = `
          <div class="live-avatar"><img src="${avatarDataURI(name.charAt(0))}" alt="${name} 아바타" width="28" height="28" loading="lazy"></div>
          <div>
            <div class="live-badge"><span class="live-dot" aria-hidden="true"></span><strong>${name}</strong>님이 신청했어요</div>
            <div class="live-meta">${age} · 방금</div>
          </div>`;
        if (container.children.length >= 3) container.removeChild(container.firstElementChild);
        container.appendChild(toast);
        setTimeout(() => { if (toast.parentNode) toast.parentNode.removeChild(toast); }, 6200);
        addRow(name, age, nowKST(), true);
        if (seatsRemaining > 1) seatsRemaining -= 1;
        updateSeatsUI();
      }

      function schedule(){
        setTimeout(() => { createToast(); schedule(); }, rand(2500, 8500));
      }
      schedule();

      const prevConv = window.conversionCallback;
      window.conversionCallback = function(){
        try { if (typeof prevConv === 'function') prevConv(); } catch(e){}
        const name = maskedName();
        const age = ages[rand(0, ages.length-1)];
        addRow(name, age, nowKST(), true);
        if (seatsRemaining > 1) seatsRemaining -= 1;
        updateSeatsUI();
      };
    })();
  </script>
  <!-- ▲▲ 실시간 신청 애니메이션 스크립트 ▲▲ -->
</body>
</html>