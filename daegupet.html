<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KN95GTT2');</script>
  <!-- End Google Tag Manager -->
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-P7B92596QT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}    
    gtag('js', new Date());
    gtag('config', 'G-P7B92596QT');
  </script>

  <!-- 라이트 모드 강제 -->
  <meta name="color-scheme" content="light">
  <meta name="supported-color-schemes" content="light">    

  <!-- MS Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "st7wj6aj7b");
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>케이펫페어 수원 2025 - 무료 사전등록</title>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;line-height:1.6;color:#333;background:#f8f9fa}
    .container{max-width:100%;margin:0 auto;padding:0 20px}
    .hero{background:linear-gradient(rgba(102,126,234,.85),rgba(118,75,162,.85)),url('https://images.unsplash.com/photo-1601758228041-f3b2795255f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover;color:#fff;padding:40px 0 60px;text-align:center;position:relative;overflow:hidden}
    .hero::before{content:'';position:absolute;inset:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="60" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="70" cy="80" r="2.5" fill="rgba(255,255,255,0.1)"/></svg>');animation:float 20s linear infinite}
    @keyframes float{0%{transform:translateY(100vh) rotate(0)}100%{transform:translateY(-100vh) rotate(360deg)}}
    .hero-content{position:relative;z-index:2}
    .event-badge{display:inline-block;background:rgba(255,255,255,.2);backdrop-filter:blur(10px);padding:8px 16px;border-radius:20px;font-size:14px;margin-bottom:20px;border:1px solid rgba(255,255,255,.3)}
    .hero h1{font-size:28px;font-weight:800;margin-bottom:15px;line-height:1.2}
    .hero .subtitle{font-size:16px;margin-bottom:30px;opacity:.9}
    .countdown-container{background:rgba(255,255,255,.15);backdrop-filter:blur(10px);border-radius:15px;padding:20px;margin:30px 20px;border:1px solid rgba(255,255,255,.2)}
    .countdown-title{font-size:16px;margin-bottom:15px;font-weight:600}
    .countdown{display:flex;justify-content:center;gap:15px;margin-bottom:20px}
    .countdown-item{text-align:center}
    .countdown-number{display:block;font-size:24px;font-weight:800;color:#fff;background:rgba(255,255,255,.2);border-radius:8px;padding:10px 8px;min-width:50px;margin-bottom:5px}
    .countdown-label{font-size:12px;opacity:.8}
    .urgent-text{color:#ffeb3b;font-weight:600;font-size:14px;animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}
    .cta-button{display:inline-block;background:linear-gradient(135deg,#ff6b6b,#ee5a24);color:#fff;padding:18px 40px;border-radius:50px;text-decoration:none;font-weight:700;font-size:18px;box-shadow:0 8px 25px rgba(0,0,0,.3);transition:.3s;margin-top:20px;position:relative;overflow:hidden}
    .cta-button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}
    .cta-button:hover::before{left:100%}
    .cta-button:hover{transform:translateY(-2px);box-shadow:0 12px 35px rgba(0,0,0,.4)}
    .price-highlight{margin:20px 0;font-size:16px}
    .original-price{text-decoration:line-through;color:#ff6b6b;opacity:.8}
    .free-price{color:#4ecdc4;font-weight:800;font-size:20px}
    .content-section{background:#fff;padding:24px 0 80px}
    .floating-cta{position:fixed;bottom:0;left:0;right:0;background:linear-gradient(135deg,#ff6b6b,#ee5a24);color:#fff;padding:15px 20px;text-align:center;z-index:1000;box-shadow:0 -5px 20px rgba(0,0,0,.3);transform:translateY(100%);transition:transform .3s ease}
    .floating-cta.show{transform:translateY(0)}
    .floating-cta-content{display:flex;align-items:center;justify-content:space-between;max-width:400px;margin:0 auto}
    .floating-countdown{font-size:14px;font-weight:600}
    .floating-button{background:rgba(255,255,255,.2);border:none;color:#fff;padding:12px 24px;border-radius:25px;font-weight:600;cursor:pointer;transition:.3s}
    .floating-button:hover{background:rgba(255,255,255,.3);transform:scale(1.05)}
    @media(max-width:768px){.hero h1{font-size:24px}.countdown{gap:10px}.countdown-number{font-size:20px;padding:8px 6px;min-width:45px}.cta-button{padding:15px 30px;font-size:16px}.container{padding:0 15px}.floating-cta-content{flex-direction:column;gap:10px}}
  
  /* ===== Desktop에서도 모바일처럼 보이기(고정 폭) ===== */
  @media (min-width: 769px){
    body{ background:#0f1115; }
    .mobile-viewport{ width:420px; min-height:100vh; margin:0 auto; background:#fff; box-shadow:0 10px 30px rgba(0,0,0,.2); }
    .container{ max-width:100%; padding:0 15px; }
    /* 플로팅바를 좁은 뷰포트에 맞춰 중앙 하단 고정 */
    .floating-cta{ left:50% !important; right:auto !important; width:420px; transform:translateX(-50%) translateY(100%); }
    .floating-cta.show{ transform:translateX(-50%) translateY(0); }
    /* 실시간 알림은 모바일 뷰포트 오른쪽 바깥 20px 지점 */
    #liveNotifications{ right:auto; left:calc(50% + 230px); }
  }
</style>

  <!-- Open Graph -->
  <meta property="og:title" content="수원 펫박람회 - 사전등록시 무료 입장권 지급">
  <meta property="og:description" content="9.12(금)~14(일) 수원메쎄에서 열리는 펫박람회에 사전 등록하고 무료 입장하세요!">
  <meta property="og:image" content="https://minkn96.github.io/site/suwon-pet.png">
  <meta property="og:url" content="https://minkn96.github.io/site/suwonpet.html">
  <meta property="og:type" content="website">
  <meta property="og:image:width" content="1080">
  <meta property="og:image:height" content="1080">
</head>
<body>
  <div class="mobile-viewport">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KN95GTT2"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- 상단 잔여석 바 (인라인 스타일만 사용) -->
  <div id="kd-bar" role="status" aria-live="polite"
       style="position:sticky;top:0;z-index:9999;padding:10px 14px;background:#0b1a3a;color:#fff;border-bottom:1px solid rgba(255,255,255,.12);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif">
    <div style="font-weight:800;font-size:14px;letter-spacing:.2px;">
      무료 등록 마감까지 <span id="kd-countdown">00:00:00</span>
      · 예상 잔여 <strong style="color:#ffeb3b;"><span id="kd-seats">100</span>명</strong>
    </div>
    <div style="height:6px;background:rgba(255,255,255,.25);border-radius:999px;overflow:hidden;margin-top:8px;">
      <span id="kd-fill" style="display:block;height:100%;width:0;background:#ffeb3b;box-shadow:inset 0 0 0 1px rgba(0,0,0,.05);transition:width .6s ease;"></span>
    </div>
  </div>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <div class="event-badge">🐾 수원 펫박람회 - 편리한세상</div>
        <h1>2025 케이펫페어 수원<br>사전등록 무료 입장권 지급</h1>
        <p class="subtitle">9월 반려용품 할인혜택 🏖️</p>

        <div class="countdown-container">
          <div class="countdown-title">⏰ 무료 사전등록 마감까지</div>
          <div class="countdown">
            <div class="countdown-item"><span class="countdown-number" id="days">20</span><span class="countdown-label">일</span></div>
            <div class="countdown-item"><span class="countdown-number" id="hours">15</span><span class="countdown-label">시간</span></div>
            <div class="countdown-item"><span class="countdown-number" id="minutes">30</span><span class="countdown-label">분</span></div>
            <div class="countdown-item"><span class="countdown-number" id="seconds">45</span><span class="countdown-label">초</span></div>
          </div>
          <div class="urgent-text">🔥 9/11(목) 23시 59분 마감!</div>
        </div>

        <div class="price-highlight">입장료 3일 <span class="original-price">30,000원</span> → <span class="free-price">0원</span></div>
        <a href="https://Athog.me/t737kh6e0i" class="cta-button" onclick="trackInitiateCheckout('hero')">무료입장 신청하기 🎯</a>
      </div>
    </div>
  </section>

  <!-- 상세 섹션을 통이미지로 교체 -->
  <section class="content-section">
    <div class="container">
      <img src="suwonpet.png" alt="케이펫페어 상세 콘텐츠" style="width:100%;height:auto;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.08);" />
    </div>
  </section>

  <!-- Floating CTA -->
  <div class="floating-cta" id="floatingCta">
    <div class="floating-cta-content">
      <div>
        <div class="floating-countdown">마감까지 <span id="floatingTimer">20일 15시간</span></div>
        <div style="font-size:12px;opacity:.8">무료 사전등록 기회!</div>
      </div>
      <button class="floating-button" onclick="redirectToRegistration('floating')">무료입장 신청</button>
    </div>
  </div>

  <!-- 실시간 등록 알림 컨테이너(고정) -->
  <div id="liveNotifications" style="position:fixed;top:50%;right:20px;width:250px;z-index:999;transform:translateY(-50%);"></div>

  <!-- 기존 스크립트 (카운트다운/실시간 알림/트래킹) -->
  <script>
    // === [변경 사항 1] 메인/플로팅 카운트다운을 9/11(목) 23:59:59 KST로 고정 ===
    const MAIN_DEADLINE_KST = '2025-09-11T23:59:59+09:00';

    // 카운트다운 타이머 (메인 박스 + 플로팅 CTA)
    function updateCountdown() {
      const deadline = new Date(MAIN_DEADLINE_KST).getTime();
      const now = Date.now();
      const distance = deadline - now;

      if (distance < 0) {
        ['days','hours','minutes','seconds'].forEach(id => { const el=document.getElementById(id); if(el) el.textContent='00'; });
        const ft=document.getElementById('floatingTimer'); if(ft) ft.textContent='마감됨';
        return;
      }
      const days = Math.floor(distance/(1000*60*60*24));
      const hours = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
      const minutes = Math.floor((distance%(1000*60*60))/(1000*60));
      const seconds = Math.floor((distance%(1000*60))/1000);

      const set = (id, v) => { const el = document.getElementById(id); if (el) el.textContent = String(v).padStart(2,'0'); };
      set('days', days); set('hours', hours); set('minutes', minutes); set('seconds', seconds);

      const ft=document.getElementById('floatingTimer');
      if(ft) ft.textContent = `${days}일 ${hours}시간`;
    }

    function showFloatingCta() {
      const el=document.getElementById('floatingCta');
      const hero=document.querySelector('.hero');
      if(!el||!hero) return;
      if(window.scrollY > (hero.offsetHeight||0)) el.classList.add('show');
      else el.classList.remove('show');
    }

    function trackPageView(){ console.log('Meta Pixel: PageView'); }
    function trackViewContent(){ console.log('Meta Pixel: ViewContent'); }
    function trackInitiateCheckout(source){ console.log('Meta Pixel: InitiateCheckout from', source); }

    function redirectToRegistration(source){
      trackInitiateCheckout(source);
      window.open('https://Athog.me/t737kh6e0i', '_blank');
    }

    let viewContentTracked=false;
    window.addEventListener('scroll', ()=>{
      showFloatingCta();
      if(!viewContentTracked && window.scrollY > document.body.scrollHeight*0.5){
        trackViewContent(); viewContentTracked=true;
      }
    });

    // 실시간 등록 알림 시스템
    const names=["김민지","이서연","박지우","최유진","정하은","강소영","윤채원","임다은","오수빈","한예린","조아영","신지민","배현서","류서진","노예지","홍다인","송유나","전서현","권지은","문채영","김도연","이수연","박서영","최지수"];
    const pets=["🐕 몽이","🐱 나비","🐕 코코","🐱 루루","🐕 바둑이","🐱 치즈","🐕 두부","🐱 로빈"];
    let currentCount=127;

    function maskName(name){ if(name.length<=2) return name; return name.charAt(0)+'*'.repeat(name.length-2)+name.charAt(name.length-1); }
    function createNotification(name, pet){
      const el=document.createElement('div');
      el.style.cssText='background:rgba(255,255,255,.95);color:#333;padding:10px 15px;border-radius:25px;margin-bottom:10px;font-size:12px;box-shadow:0 3px 10px rgba(0,0,0,.2);transform:translateX(100%);transition:all .5s ease;position:relative;';
      el.innerHTML=`<strong>${maskName(name)}</strong>님이 ${pet}와 함께 등록완료!`;
      return el;
    }
    function showLiveNotification(){
      const container=document.getElementById('liveNotifications'); if(!container) return;
      const name=names[Math.floor(Math.random()*names.length)];
      const pet=pets[Math.floor(Math.random()*pets.length)];
      const note=createNotification(name,pet);
      container.appendChild(note);
      setTimeout(()=>{ note.style.transform='translateX(0)'; },100);
      setTimeout(()=>{ note.style.transform='translateX(100%)'; setTimeout(()=>{ note.remove(); },500); },3000);
      currentCount++;
      const counter=document.getElementById('totalCounter'); if(counter){ counter.textContent=currentCount.toLocaleString(); }
    }

    // 초기화 (메인/플로팅 카운트다운)
    updateCountdown(); setInterval(updateCountdown,1000);
    setInterval(showLiveNotification,8000);
    setTimeout(showLiveNotification,3000);
    trackPageView();
  </script>

  <!-- 상단 잔여석 + 진행바 + 감소 로직  -->
<script>
  (function(){
    // === 고정값 & 초기 잔여 ===
    const CAPACITY  = 100;     // 게이지 기준(100명)
    const MIN_FLOOR = 3;       // 잔여 하한
    const BASE = 20;           // 시작 잔여: 20~28
    const EXTRA = Math.floor(Math.random()*9);
    const DAILY_QUOTA = BASE + EXTRA;
    let seatsRemaining = DAILY_QUOTA; // ✅ 잔여 표시 로직은 그대로 유지

    // 엘리먼트
    const seatsEl = document.getElementById('kd-seats');
    const fillEl  = document.getElementById('kd-fill');
    const cdEl    = document.getElementById('kd-countdown');

    // 게이지/잔여 표시 업데이트
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
    function updateSeatsUI(){
      // 잔여 숫자: 10~18에서 시작해 클릭/알림 때만 감소
      if (seatsEl) seatsEl.textContent = String(seatsRemaining);
      // 게이지: 사용(채워진) 비율 기준으로 '늘어나는' 느낌
      if (fillEl) {
        const used = CAPACITY - seatsRemaining; // 100 기준으로 얼마나 찼는지
        const percent = clamp((used / CAPACITY) * 100, 0, 100);
        fillEl.style.width = percent + '%';
      }
    }
    updateSeatsUI();

    // 상단 HH:MM:SS → 오늘 자정(브라우저 로컬)까지 카운트다운
    function pad(n){return String(n).padStart(2,'0');}
    function updateTopBarCountdown(){
      const now = new Date();
      const eod = new Date(now);
      eod.setHours(23,59,59,999);
      let dist = eod.getTime() - now.getTime();
      if (dist < 0) {
        const next = new Date();
        next.setHours(23,59,59,999);
        dist = next.getTime() - Date.now();
      }
      const h = Math.floor(dist/(1000*60*60));
      const m = Math.floor((dist%(1000*60*60))/(1000*60));
      const s = Math.floor((dist%(1000*60))/1000);
      if (cdEl) cdEl.textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
    }
    updateTopBarCountdown();
    setInterval(updateTopBarCountdown, 1000);

    // 감소 로직(중복 방지 + 하한 유지)
    let lastDec = 0;
    function decSeatOnce(){
      const now = Date.now();
      if (now - lastDec < 600) return; // 0.6초 이내 중복 방지
      lastDec = now;
      if (seatsRemaining > MIN_FLOOR) {
        seatsRemaining -= 1;   // 잔여만 감소
        updateSeatsUI();       // 게이지는 자연히 증가
      }
    }

    // CTA 클릭 시 감소(함수 후킹 or fallback)
    function hookRedirect(){
      if (typeof window.redirectToRegistration === 'function' && !window.redirectToRegistration.__patched){
        const orig = window.redirectToRegistration;
        window.redirectToRegistration = function(){
          try { return orig.apply(this, arguments); }
          finally { decSeatOnce(); }
        };
        window.redirectToRegistration.__patched = true;
        return true;
      }
      return false;
    }
    if (!hookRedirect()){
      document.querySelectorAll('.cta-button, .floating-button').forEach(el=>{
        el.addEventListener('click', decSeatOnce, { passive:true });
      });
    }

    // 실시간 알림 발생 시 감소(후킹 + MutationObserver)
    function hookLive(){
      if (typeof window.showLiveNotification === 'function' && !window.showLiveNotification.__patched){
        const orig = window.showLiveNotification;
        window.showLiveNotification = function(){
          try { return orig.apply(this, arguments); }
          finally { decSeatOnce(); }
        };
        window.showLiveNotification.__patched = true;
        return true;
      }
      return false;
    }
    const hooked = hookLive();
    const container = document.getElementById('liveNotifications');
    if (container && 'MutationObserver' in window){
      const mo = new MutationObserver(muts => {
        for (const m of muts){
          if (m.addedNodes && m.addedNodes.length){ decSeatOnce(); break; }
        }
      });
      mo.observe(container, { childList:true });
    }
  })();
</script>
  </div>
</body>
</html>
