<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Open Graph -->
  <meta property="og:title" content="비절개 모발이식">
  <meta property="og:description" content="비절개 모발이식이 1000모에 99만원">
  <meta property="og:image" content="https://minkn96.github.io/site/gemma_s.png">
  <meta property="og:url" content="https://minkn96.github.io/site/gemma_short.html">
  <meta property="og:type" content="website">
  <meta property="og:image:width" content="1080">
  <meta property="og:image:height" content="1080">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KN95GTT2');</script>
  <!-- End Google Tag Manager -->

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-P7B92596QT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}    
    gtag('js', new Date());
    gtag('config', 'G-P7B92596QT');
  </script>

  <!-- MS Clarity -->
  <script>
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "st7wj6aj7b");
  </script>

  <!-- Meta Pixel Base Code는 GTM에서 관리됨 -->

  <!-- 라이트 모드 강제 -->
  <meta name="color-scheme" content="light">
  <meta name="supported-color-schemes" content="light">   

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>비절개 모발이식 특별 혜택 룰렛</title>
  <style>
    :root{
      --brand:#1e40af;          /* 네이비 */
      --brand-2:#0ea5e9;        /* 포인트 블루 */
      --accent:#f59e0b;         /* 오렌지 */
      --danger:#ef4444;         /* 레드 (1등) */
      --ok:#10b981;             /* 그린 */
      --violet:#8b5cf6;         /* 퍼플 */
      --blue:#3b82f6;           /* 블루 */
      --fg:#1f2937;             /* 본문 */
      --bg:#f8fafc;             /* 배경 */
      --shadow:0 10px 30px rgba(0,0,0,.18);
    }

    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      background:var(--bg);color:var(--fg);line-height:1.6;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    }

    .background-wrapper{ 
      background-image:url('gemma_short.png');
      background-size:cover;background-position:center;background-repeat:no-repeat;
      min-height:100vh;position:relative;
    }

    .header,.price-info,.contact-info{display:none}

    .container{
      width:100vw;max-width:1080px;margin:0 auto;position:absolute;left:50%;transform:translateX(-50%);
      top:689px;height:calc(100vh - 689px);display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
      padding-top:28px;
    }

    /* ======= 새 룰렛 디자인 ======= */
    .roulette-wrap{position:relative;width:300px;max-width:84vw;aspect-ratio:1;margin:0 auto 22px}

    .roulette-wheel{position:relative;width:100%;height:100%;border-radius:50%;
      background:
        radial-gradient( circle at 50% 42%, rgba(255,255,255,.6), rgba(255,255,255,0) 55%),
        conic-gradient(from -90deg,
          var(--danger) 0 72deg,
          var(--blue) 72deg 144deg,
          var(--accent) 144deg 216deg,
          var(--ok) 216deg 288deg,
          var(--violet) 288deg 360deg);
      box-shadow:var(--shadow);border:6px solid #fff;overflow:hidden;
      transition:transform 4s cubic-bezier(.12,.01,.08,1);
      will-change:transform;
      isolation:isolate;
    }
    /* 외곽 금테 */
    .roulette-wheel::before{content:"";position:absolute;inset:-10px;border-radius:50%;
      background:conic-gradient(from 0deg,#f5d98f,#f0b429,#eab308,#f5d98f);
      z-index:-1;filter:blur(1px)
    }
    /* 내측 디스크/분할선/광택 */
    .roulette-wheel::after{content:"";position:absolute;inset:12px;border-radius:50%;
      background:
        radial-gradient(circle at 50% 50%, rgba(0,0,0,.18), rgba(0,0,0,0) 55%),
        repeating-conic-gradient(
          from -90deg,
          rgba(255,255,255,.9) 0 1.5deg,
          transparent 1.5deg 72deg);
      mix-blend-mode:overlay;pointer-events:none
    }

    /* 라벨(텍스트) */
    .seg{position:absolute;top:50%;left:50%;width:50%;height:50%;transform-origin:0 0;display:flex;align-items:center;justify-content:center;pointer-events:none}
    .seg .label{width:90px;max-width:28vw;text-align:center;color:#fff;text-shadow:0 2px 3px rgba(0,0,0,.35);font-weight:800;letter-spacing:.2px;line-height:1.15}
    .label .t-main{font-size:.95rem}
    .label .t-sub{font-size:.78rem;font-weight:700;opacity:.95}
    .badge{display:inline-block;margin-top:4px;padding:2px 6px;border-radius:999px;background:rgba(255,255,255,.25);backdrop-filter:blur(2px);font-size:.72rem}

    /* 각 세그먼트 중앙 각도: -54, 18, 90, 162, 234 */
    .seg-0{transform:rotate(-54deg)}
    .seg-1{transform:rotate(18deg)}
    .seg-2{transform:rotate(90deg)}
    .seg-3{transform:rotate(162deg)}
    .seg-4{transform:rotate(234deg)}
    .seg .label .inner-0{transform:rotate(54deg)}
    .seg .label .inner-1{transform:rotate(-18deg)}
    .seg .label .inner-2{transform:rotate(-90deg)}
    .seg .label .inner-3{transform:rotate(-162deg)}
    .seg .label .inner-4{transform:rotate(-234deg)}

    /* 포인터 */
    .roulette-pointer{position:absolute;left:50%;top:-8px;transform:translateX(-50%);width:0;height:0;z-index:15;
      filter:drop-shadow(0 3px 6px rgba(0,0,0,.28))}
    .roulette-pointer::before{content:"";display:block;width:24px;height:28px;clip-path:polygon(0 0, 100% 0, 50% 100%);
      background:linear-gradient(180deg,#fef3c7,#facc15 65%,#eab308);border-top:2px solid #b45309}
    .pointer-wobble{animation:wobble .5s ease-out 1}
    @keyframes wobble{0%{transform:translateX(-50%) rotate(0)}35%{transform:translateX(-50%) rotate(-8deg)}70%{transform:translateX(-50%) rotate(5deg)}100%{transform:translateX(-50%) rotate(0)}}

    /* 중앙 캡/버튼 */
    .center-cap{position:absolute;inset:50% auto auto 50%;transform:translate(-50%,-50%);width:84px;height:84px;border-radius:50%;
      background:radial-gradient(circle at 35% 30%,#ffffff,#fef08a 38%,#facc15 60%,#b45309 100%);
      display:flex;align-items:center;justify-content:center;color:#2d2a10;font-weight:900;text-shadow:0 1px 0 #fff8;box-shadow:0 6px 18px rgba(0,0,0,.32), inset 0 2px 8px rgba(255,255,255,.6)}
    .center-cap span{font-size:.95rem}

    .spin-button{background:var(--brand);color:#fff;border:none;padding:14px 40px;font-size:1rem;font-weight:700;border-radius:999px;cursor:pointer;transition:all .2s;box-shadow:0 6px 16px rgba(30,64,175,.35);width:100%;max-width:320px;margin-top:12px;touch-action:manipulation}
    .spin-button:hover{background:#1d4ed8;transform:translateY(-1px)}
    .spin-button:disabled{background:#94a3b8;box-shadow:none;transform:none;cursor:not-allowed}
    .spin-button.benefit-button{background:var(--danger);animation:pulse-glow 2s infinite}
    @keyframes pulse-glow{0%{box-shadow:0 4px 12px rgba(220,38,38,.35)}50%{box-shadow:0 6px 20px rgba(220,38,38,.6)}100%{box-shadow:0 4px 12px rgba(220,38,38,.35)}}

    /* 모달 etc. 기존 스타일 대부분 유지 + 약간의 조정 */
    .result-modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(4px);padding:20px}
    .modal-content{background:#fff;padding:30px 25px;border-radius:20px;text-align:center;width:100%;max-width:450px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px rgba(0,0,0,.25);border:1px solid #e2e8f0}
    .modal-title{font-size:1.6rem;color:var(--danger);margin-bottom:12px;font-weight:800}
    .modal-prize{font-size:1.3rem;margin-bottom:18px;color:var(--brand);font-weight:800}
    .warning-text{background:#fef2f2;padding:18px;border-radius:12px;margin:18px 0;border:1px solid #fecaca;color:var(--danger);font-weight:600;font-size:.95rem}
    .form-container{margin:18px 0;padding:18px;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0;min-height:100px}
    .modal-buttons{display:flex;flex-direction:column;gap:12px;margin-top:16px}
    .modal-button{border:none;padding:14px 32px;border-radius:999px;cursor:pointer;font-weight:800;transition:all .2s;font-size:1rem;width:100%}
    .complete-button{background:#10b981;color:#fff}.complete-button:hover{background:#059669}
    .later-button{background:#94a3b8;color:#fff}.later-button:hover{background:#64748b}

    .countdown{position:fixed;top:15px;left:15px;background:var(--danger);color:#fff;padding:10px 12px;border-radius:8px;font-weight:800;display:none;z-index:999;font-size:.85rem;box-shadow:0 4px 12px rgba(220,38,38,.35)}

    /* Footer */
    .footer{background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-top:1px solid #e2e8f0;padding:15px;text-align:center;font-size:.75rem;color:#64748b;box-shadow:0 -2px 10px rgba(0,0,0,.08)}
    .footer-info{display:flex;justify-content:center;align-items:center;gap:15px;flex-wrap:wrap}
    .footer-item{white-space:nowrap}

    /* 큰 화면 최적화 */
    @media (min-width:1081px){
      .background-wrapper{min-height:100vh;max-width:500px;margin:0 auto}
      .container{width:100%;height:calc(100vh - 35.885vh);top:35.885vh;padding:0 20px;padding-top:30px;max-width:500px}
    }

    /* 모바일 최적화 */
    @media (max-width:1080px){
      .container{width:100vw;height:calc(100vh - 35.885vh);top:35.885vh;padding:0 20px;padding-top:18px}
      .roulette-wrap{max-width:420px}
      .spin-button{max-width:360px}
      .modal-content{padding:30px 25px;margin:15px}
    }

    @media (max-width:480px){
      .roulette-wrap{max-width:340px}
      .center-cap{width:74px;height:74px}
      .label .t-main{font-size:.9rem}
      .label .t-sub{font-size:.75rem}
      .footer{padding:6px 10px;font-size:.68rem}
      .footer-info{gap:8px}
    }

    /* 접근성/저감 모드 */
    @media (prefers-reduced-motion: reduce){
      .roulette-wheel{transition:transform 0.001s linear}
      .spin-button,.modal-button{transition:none}
      .pointer-wobble{animation:none}
      .spin-button.benefit-button{animation:none}
    }

    /* 간단한 축포 애니메이션 */
    .confetti{position:fixed;top:-10px;left:50%;width:6px;height:14px;border-radius:2px;opacity:.9;pointer-events:none;z-index:1200}
    @keyframes fall{to{transform:translate(var(--x,0), 105vh) rotate(720deg);opacity:.95}}
  </style>
</head>
<body>
  <div class="background-wrapper">
    <div class="container">
      <div class="roulette-wrap" aria-live="polite">
        <div class="roulette-pointer" id="roulettePointer"></div>
        <div class="roulette-wheel" id="rouletteWheel" role="img" aria-label="혜택 룰렛">
          <!-- 라벨들 -->
          <div class="seg seg-0"><div class="label"><div class="inner-0"><div class="t-main">1000모</div><div class="t-sub">99만원 혜택</div><div class="badge">⭐ 1등</div></div></div></div>
          <div class="seg seg-1"><div class="label"><div class="inner-1"><div class="t-main">100만원</div><div class="t-sub">할인권</div></div></div></div>
          <div class="seg seg-2"><div class="label"><div class="inner-2"><div class="t-main">50만원</div><div class="t-sub">할인권</div></div></div></div>
          <div class="seg seg-3"><div class="label"><div class="inner-3"><div class="t-main">75만원</div><div class="t-sub">할인권</div></div></div></div>
          <div class="seg seg-4"><div class="label"><div class="inner-4"><div class="t-main">25만원</div><div class="t-sub">할인권</div></div></div></div>
        </div>
        <div class="center-cap"><span>START</span></div>
      </div>

      <button class="spin-button" id="spinButton" onclick="handleButtonClick()">🎰 룰렛 돌리기</button>
    </div>
  </div>

  <!-- 푸터 -->
  <footer class="footer">
    <div class="footer-info">
      <div class="footer-item">advertise agency : (주)편리한세상</div>
      <div class="footer-item">사업자번호 : 722-26-01851</div>
    </div>
  </footer>

  <!-- 결과 모달 (기존 구조 유지) -->
  <div class="result-modal" id="resultModal">
    <div class="modal-content">
      <h2 class="modal-title">🎉 축하합니다!</h2>
      <p class="modal-prize">🏆 1000모당 99만원 혜택 당첨!</p>
      <div class="warning-text">⚠️ 이 혜택을 받으시려면 아래 질문을 답변해주세요!<br>답변하지 않으면 혜택이 사라집니다.</div>
      <div class="form-container">
        <tenping class="adsbytenping" style="width:100%; margin:0 auto; display:block;"
          tenping-ad-type="CInmlFSNPJoo9rBMK%2brlTg%3d%3d"
          tenping-ad-client="bMCak6oFZXAMeS0Ed1JBbmPYyFKadysuzNA%2fwwgyA50OoxZL1SUZ3jqIb0PvbgZs"
          tenping-ad-campaign="2025091712550001"
          tenping-ad-distributionAddID="2025092000410005"
          tenping-ad-contain_image="false" tenping-ad-contain_logo="false"
          tenping-ad-contain_Plugin="false" tenping-ad-contain_TpCall="false"
          tenping-ad-theme="white"></tenping>
      </div>
      <div class="modal-buttons">
        <button class="modal-button complete-button" onclick="completeForm()">작성완료</button>
        <button class="modal-button later-button" onclick="closeLater()">나중에하기</button>
      </div>
    </div>
  </div>

  <div class="countdown" id="countdown">혜택 만료까지: <span id="timer">10:00</span></div>

  <script async src="//ads.tenping.kr/scripts/adsbytenping.min.js"></script>
  <script>!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');fbq('init', '1377330030217069');fbq('track', 'PageView');</script>
  <script>function conversionCallback(){fbq('track', 'CompleteRegistration');}</script>

  <script>
    // ===== JS 리디자인: 더 자연스러운 회전, 포인터 흔들림, 축포 =====
    let hasSpun = false;
    let showingBenefitButton = false;
    let countdownTimer; let timeLeft = 600; // 10분

    const WEDGE = 72;              // 5분할
    const WIN_INDEX = 0;           // 1등 세그먼트 인덱스(0이 12시 방향부터 시계방향)

    const wheel = document.getElementById('rouletteWheel');
    const pointer = document.getElementById('roulettePointer');
    const spinBtn = document.getElementById('spinButton');

    function handleButtonClick(){
      if(!hasSpun){ spinRoulette(WIN_INDEX); }
      else if(showingBenefitButton){ showBenefitModal(); }
    }

    function spinRoulette(targetIndex){
      if(hasSpun) return;
      spinBtn.disabled = true; spinBtn.textContent = '룰렛 돌리는 중...';

      // 목표 각도: 세그먼트 중앙을 12시(0deg)에 맞춤
      const centerAngle = -90 + targetIndex*WEDGE + (WEDGE/2); // -90deg 기준
      const spins = Math.floor(Math.random()*3)+3.6; // 6~8바퀴
      const finalRotation = (360*spins) - centerAngle; // 시계방향 회전

      wheel.style.transform = `rotate(${finalRotation}deg)`;

      // 정지 직전 포인터 살짝 흔들림
      setTimeout(()=>{ pointer.classList.add('pointer-wobble'); }, Math.max(0, 4000-420));
      setTimeout(()=>{ pointer.classList.remove('pointer-wobble'); }, Math.max(0, 4000-80));

      setTimeout(()=>{
        showResult();
        hasSpun = true;
        launchConfetti();
        if(navigator.vibrate){ navigator.vibrate([18,30,18]); }
      }, 4050);
    }

    function showResult(){
      const modal = document.getElementById('resultModal');
      modal.style.display = 'flex';
      startCountdown();
    }

    function showBenefitModal(){
      const modal = document.getElementById('resultModal');
      modal.style.display = 'flex';
    }

    function completeForm(){
      const modal = document.getElementById('resultModal');
      modal.style.display = 'none';
      if (typeof conversionCallback === 'function') conversionCallback();
      spinBtn.textContent = '🏆 1등 혜택받기';
      spinBtn.disabled = false; spinBtn.classList.add('benefit-button');
      showingBenefitButton = true;
    }

    function closeLater(){
      const modal = document.getElementById('resultModal');
      modal.style.display = 'none';
      spinBtn.textContent = '🏆 1등 혜택받기';
      spinBtn.disabled = false; spinBtn.classList.add('benefit-button');
      showingBenefitButton = true;
    }

    function startCountdown(){
      const box = document.getElementById('countdown');
      const timer = document.getElementById('timer');
      box.style.display = 'block';
      countdownTimer = setInterval(()=>{
        const m = Math.floor(timeLeft/60); const s = (timeLeft%60).toString().padStart(2,'0');
        timer.textContent = `${m}:${s}`;
        if(timeLeft<=0){clearInterval(countdownTimer); box.textContent='혜택이 만료되었습니다.'; box.style.background='#64748b';}
        timeLeft--;
      },1000);
    }

    // 간단한 축포 DOM 애니메이션 (가벼움)
    function launchConfetti(){
      const colors = ['#f87171','#facc15','#4ade80','#60a5fa','#a78bfa'];
      const count = 100;
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className='confetti';
        el.style.background = colors[i%colors.length];
        const x = (Math.random()*2-1)*45 + 'vw';
        el.style.setProperty('--x', x);
        el.style.left = (50 + (Math.random()*40-20)) + 'vw';
        el.style.animation = `fall ${Math.random()*1 + 1.8}s linear ${Math.random()*0.6}s forwards`;
        document.body.appendChild(el);
        setTimeout(()=>el.remove(), 3500);
      }
    }
  </script>
</body>
</html>
